# Dangling Index

~~ì •ì‹ ëª…ì¹­ì€ ì €ë ‡ì§€ë§Œ ê°œì¸ì ìœ¼ë¡œëŠ” ì¢€ë¹„ ì¸ë±ìŠ¤ë¼ê³  ë§í•˜ê³  ì‹¶ë‹¤~~

ì„œë²„ ìƒë©´ ì´ë™ í”„ë¡œì íŠ¸ì˜ ì¼í™˜ìœ¼ë¡œ ê¸°ì¡´ì— ìš´ì˜ë˜ë˜ Elasticsearch í´ëŸ¬ìŠ¤í„°ì˜ ì„œë²„ë¥¼ ëŒ€ëŒ€ì ìœ¼ë¡œ êµì²´í•˜ëŠ” ì‘ì—…ì´ ìˆì—ˆë‹¤. ë‹¤ë¥¸ í´ëŸ¬ìŠ¤í„° êµì²´ ì‘ì—…ê³¼ ë‹¤ë¥¸ ì ì´ ìˆì—ˆë‹¤ë©´ Coordinating Node ë¿ ì•„ë‹ˆë¼ Master ë° Data Node ë¡œ ì‚¬ìš© ì¤‘ì¸ ì„œë²„ì˜ êµì²´ê°€ í•„ìš”í–ˆë˜ ê²ƒ.

í•´ë‹¹ ì‘ì—…ì„ ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¡œ êµì²´ ì‘ì—…ì„ ì‹¤í–‰í–ˆë‹¤.

1. ì‹ ê·œ ì„œë²„ì— ê¸°ì¡´ í´ëŸ¬ìŠ¤í„°ì™€ ë™ì¼í•œ êµ¬ì¡° ë° ë²„ì „ìœ¼ë¡œ Elasticsearch ì‹ ê·œ êµ¬ì„±
2. ê¸°ì¡´ í´ëŸ¬ìŠ¤í„°ì— 1 ì˜ ë…¸ë“œë¥¼ ë¶™ì—¬ ì‚¬ìš©
3. í˜¹ì‹œ ëª¨ë¥¼ Data Node ì˜ ë””ìŠ¤í¬ ë¶€ì¡± í˜„ìƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ê¸°ì¡´ Coordinating ì „ìš© Node ë¡œ ì“°ë˜ ì„œë²„ì— Data Node Role ì„ ë¶€ì—¬ ~~ëŒ€ ì‚½ì§ˆì˜ ì„œë§‰~~
4. ê¸°ì¡´ ë…¸ë“œ Shutdown ë° 3 ì˜ Data Node Role íšŒìˆ˜

ë‹¹ì‹œ ì‘ì—…ì€ ë§¤ìš° ìˆœì¡°ë¡œì› ê³ , ë°ì´í„° ìœ ì‹¤ì´ë‚˜ í´ëŸ¬ìŠ¤í„° Red Status ì´ìŠˆ ì—†ì´ ìŠ¤ë¬´ìŠ¤í•˜ê²Œ ëë‚¬ë‹¤.

ê·¸ëŸ°ë°!

ì´í›„ë¡œ ë³„ë„ Batch ì‘ì—…ì— ì˜í•´ ì‚­ì œë˜ì—ˆë˜ ì¸ë±ìŠ¤ê°€ Red ìƒíƒœë¡œ ì‚´ì•„ë‚˜ëŠ” ê¸°í˜„ìƒì´ ë²Œì–´ì§€ê¸° ì‹œì‘í•œ ê²ƒì´ë‹¤. ë•ë¶„ì— í´ëŸ¬ìŠ¤í„° ìƒíƒœë„ Red ë¡œ ë–¨ì–´ì ¸ì„œ ëª¨ë‹ˆí„°ë§ ì•ŒëŒì€ ì•„ë¹„ê·œí™˜. ë¹ˆ ì¸ë±ìŠ¤ë¡œ ì‚´ì•„ë‚œë‹¤ë©´ ì°¨ë¼ë¦¬ Green ìƒíƒœì´ê¸°ë¼ë„ í•  ë²• í•œë°, Kibana UI ìƒì—ì„œëŠ” ëª¨ë‹ˆí„°ë§ì— ëª¨ìŠµì„ ë³´ì´ì§€ë„ ì•ŠëŠ” ì£¼ì œì— API ë‚ ë ¤ì„œ í™•ì¸í•˜ë©´ ì¡´ì¬í•˜ê³ . API ë¡œ ì‚­ì œí•˜ë©´ ì‚¬ë¼ì§€ê³  í´ëŸ¬ìŠ¤í„°ë„ ê³§ì¥ Green í™” ë˜ì§€ë§Œ, ì´ëŸ° í˜„ìƒì´ í•˜ë£¨ ëª‡ ë²ˆì”©ì´ë‚˜ ì¼ì–´ë‚˜ë©´ ê³¤ë€í•˜ë‹¤.

íŠ¹íˆ ì£¼ëª©í•  ê²ƒì€, ìœ„ì˜ ì„œë²„ êµì²´ ì‘ì—…ì´ ìˆì—ˆë˜ ì‹œê°„ëŒ€ì˜ ì¸ë±ìŠ¤ë§Œ ì¢€ë¹„í™”ë˜ì–´ ì‚´ì•„ë‚œë‹¤ëŠ” ê²ƒì´ë‹¤. ì¦‰ êµì²´í•  ë•Œ ì–´ë–¤ ì‘ì—…ì´ ì›ì¸ì´ ë˜ì–´ í•´ë‹¹ ì´ìŠˆê°€ ë°œìƒí–ˆë‹¤ëŠ” ê±´ë°... í•´ë‹¹ í´ëŸ¬ìŠ¤í„°ëŠ” ë§¤ìš° ì˜¤ë˜ëœ ë ˆê±°ì‹œ ì‹œìŠ¤í…œì¸ì§€ë¼ ILM ì„ Elasticsearch ìì²´ ì„œë¹„ìŠ¤ë„, ì‹¬ì§€ì–´ Curator ë„ ì•„ë‹Œ Jenkins ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ë°°ì¹˜ë¥¼ ëŒë¦¬ëŠ” ìƒí™©ì´ì—ˆìœ¼ë¯€ë¡œ ES ì™€ëŠ” ìƒê´€ì´ ì—†ì—ˆë‹¤. ì‹ ê·œ ì„œë²„ Disk ì—ëŸ¬ì¸ê°€ ì‹¶ì–´ì„œ ì•„ì˜ˆ ìƒˆë¡œ ì„œë²„ë¥¼ íŒŒì„œ ë°”ê¾¸ëŠ” ì‘ì—…ê¹Œì§€ í–ˆì—ˆì§€ë§Œ ìƒí™©ì€ ë°”ë€Œì§€ ì•Šì•˜ê³ ... ê·¸ ì™€ì¤‘ì— ì•Œì•„ë‚¸ ê°œë…ì´ ë°”ë¡œ **Dangling Index** ì´ë‹¤.

## Dangling Index ê°€ ë­”ë°?

Elastic ê³µì‹ í˜ì´ì§€ì—ë„ êµ‰ì¥íˆ ì§§ì€ ì„¤ëª…ë§Œ ì í˜€ ìˆì–´ì„œ ë²ˆì—­í•´ ë³´ê¸°ë¡œ í•œë‹¤.

> í•œ ë…¸ë“œê°€ ì–´ë–¤ Elasticsearch í´ëŸ¬ìŠ¤í„°ì— ì°¸ê°€í–ˆëŠ”ë° ê·¸ ë…¸ë“œ ë‚´ë¶€ì— ìˆëŠ” Data Directory ì—ëŠ” ì €ì¥ë˜ì–´ ìˆëŠ” ìƒ¤ë“œ ì •ë³´ê°€ í´ëŸ¬ìŠ¤í„°ì— ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´, ê·¸ ìƒ¤ë“œëŠ” Dangling Index ì— ì†í•˜ëŠ”ìƒ¤ë“œë¼ê³  ë§í•  ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ Dangling Index ëŠ” ì „ìš© API ë¥¼ ì‚¬ìš©í•´ì„œ ë¦¬ìŠ¤íŠ¸í™” ë° ì‚½ì…, ì‚­ì œí•  ìˆ˜ ìˆë‹¤.
> 

<aside>
ğŸ“Œ Dangling Index ê´€ë ¨ API ë¡œ ì–»ì–´ë‚¸ ê²°ê³¼ëŠ”, ê·¸ Dangling Index ê°€ í´ëŸ¬ìŠ¤í„°ì— ì¡´ì¬í•˜ë˜ ì‹œì ˆ ê°€ì¥ ìµœì‹  ìƒíƒœì˜ ì •ë³´ì˜€ëŠ”ì§€ ë³´ì¥í•  ìˆ˜ëŠ” ì—†ë‹¤.

</aside>

ì¦‰, **í´ëŸ¬ìŠ¤í„°ì—ëŠ” ì—†ëŠ”ë° ì–´ë–¤ ì´ìœ ë¡œ ë°ì´í„° ë””ë ‰í† ë¦¬ì— ì¼ë¶€ ìƒ¤ë“œ í˜•íƒœë¡œ ë‚¨ì•„ìˆëŠ” ì¸ë±ìŠ¤ë¥¼ Dangling Index** ë¼ê³  í•œë‹¤.

ì´ì¯¤ë˜ë©´ ë¬´ì—‡ì´ ì›ì¸ì´ì–´ì„œ ì´ Dangling Index ê°€ ë§Œë“¤ì–´ì¡ŒëŠ”ì§€ ì§ì‘ì´ ê°„ë‹¤. ìœ„ì˜ ì„œë²„ êµì²´ ì‘ì—… ì¤‘ Coordinating Node ì „ìš© ë…¸ë“œì— Data Role ì„ ë¶€ì—¬í•´ì„œ ì„ì‹œë¡œ ì‚¬ìš©í•˜ë˜ ê³¼ì •ì—ì„œ í•´ë‹¹ ì„œë²„ì˜ Data Directory ì— ìƒ¤ë“œ ì •ë³´ê°€ ì €ì¥ë˜ì—ˆëŠ”ë°, ì´í›„ì— ê·¸ ì„œë²„ì˜ Data Role ì„ íšŒìˆ˜í•˜ë©´ì„œ ë””ë ‰í† ë¦¬ì— ë‚¨ì€ ì •ë³´ë¥¼ ì‚­ì œí•˜ì§€ ì•Šì€ íƒ“ì—, ë¶ˆì™„ì „í•œ ìƒ¤ë“œ ì •ë³´ê°€ Dangling Index ë¡œì„œ ê³„ì†í•´ì„œ ì˜¬ë¼ì˜¤ê²Œ ëœ ê²ƒ. ê·¸ë˜ì„œ í•´ë‹¹ ì„œë²„ì— ë‚¨ì•„ìˆë˜ Data Directory ì˜ ì •ë³´ë¥¼ ë§ë”íˆ ì‚­ì œí•´ì£¼ì ê±°ì§“ë§ì²˜ëŸ¼ ì´ìŠˆë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.

### ì°¸ê³ 

- [https://www.elastic.co/guide/en/elasticsearch/reference/master/modules-gateway.html#dangling-indices](https://www.elastic.co/guide/en/elasticsearch/reference/master/modules-gateway.html#dangling-indices)
- [https://www.elastic.co/guide/en/elasticsearch/reference/master/indices.html#dangling-indices-api](https://www.elastic.co/guide/en/elasticsearch/reference/master/indices.html#dangling-indices-api)
